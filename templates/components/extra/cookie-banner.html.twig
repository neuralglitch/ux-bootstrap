{% apply spaceless -%}
  {% set o = this.options() %}

  {# Backdrop overlay (optional) #}
  {% if o.backdrop %}
    <div class="cookie-banner-backdrop position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-25" 
         style="z-index: 1049;"
         data-bs-cookie-banner-target="backdrop"></div>
  {% endif %}

  {# Cookie Banner #}
  <div class="{{ o.classes }}" 
       {{ this.renderHtmlAttributes(o.attrs) | raw }}
       style="z-index: 1050; display: none;"
       data-bs-cookie-banner-target="banner">
    
    <div class="container-fluid py-3 py-md-4">
      <div class="row align-items-center g-3">
        
        {# Content Column #}
        <div class="col-12 col-lg-7">
          <div class="cookie-banner-content">
            <h5 class="mb-2">{{ o.title }}</h5>
            <p class="mb-2 mb-lg-0 text-muted">
              {{ o.message }}
              
              {# Policy Links #}
              {% if o.privacyUrl or o.cookiePolicyUrl %}
                <span class="d-block d-sm-inline mt-2 mt-sm-0">
                  {% if o.privacyUrl %}
                    <a href="{{ o.privacyUrl }}" class="text-decoration-underline" target="_blank" rel="noopener">
                      {{ o.privacyLinkText }}
                    </a>
                  {% endif %}
                  
                  {% if o.privacyUrl and o.cookiePolicyUrl %}
                    <span class="mx-1">|</span>
                  {% endif %}
                  
                  {% if o.cookiePolicyUrl %}
                    <a href="{{ o.cookiePolicyUrl }}" class="text-decoration-underline" target="_blank" rel="noopener">
                      {{ o.cookiePolicyLinkText }}
                    </a>
                  {% endif %}
                </span>
              {% endif %}
            </p>
          </div>
        </div>
        
        {# Buttons Column #}
        <div class="col-12 col-lg-5">
          <div class="d-flex flex-column flex-sm-row gap-2 justify-content-lg-end">
            
            {# Customize Button #}
            {% if o.showCustomize %}
              <button type="button" 
                      class="btn btn-{{ o.customizeVariant }}"
                      data-action="bs-cookie-banner#customize">
                {{ o.customizeText }}
              </button>
            {% endif %}
            
            {# Reject Button #}
            {% if o.showReject %}
              <button type="button" 
                      class="btn btn-{{ o.rejectVariant }}"
                      data-action="bs-cookie-banner#reject">
                {{ o.rejectText }}
              </button>
            {% endif %}
            
            {# Accept Button #}
            <button type="button" 
                    class="btn btn-{{ o.acceptVariant }}"
                    data-action="bs-cookie-banner#accept">
              {{ o.acceptText }}
            </button>
            
            {# Dismiss Button (optional) #}
            {% if o.dismissible %}
              <button type="button" 
                      class="btn-close" 
                      aria-label="Close"
                      data-action="bs-cookie-banner#dismiss"></button>
            {% endif %}
          </div>
        </div>
        
      </div>
    </div>
  </div>

{%- endapply %}

